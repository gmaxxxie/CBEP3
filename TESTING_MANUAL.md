# 🧪 系统测试手册

## 测试环境准备

### Chrome扩展测试
1. **加载扩展** (运行部署脚本)
```bash
chmod +x deploy-test.sh
./deploy-test.sh
```

2. **Chrome加载步骤**
   - 打开 `chrome://extensions/`
   - 启用"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择项目根目录

### 后端API测试
```bash
cd backend
npm install
npm start
# 服务运行在 http://localhost:3000
```

## 🎯 功能测试矩阵

### 1. **内容抓取功能测试**

| 测试网站 | URL | 预期结果 | 状态 |
|---------|-----|---------|------|
| 亚马逊美国站 | https://amazon.com | 提取产品信息、价格、语言 | ⏳ |
| 淘宝 | https://taobao.com | 提取中文内容、商品数据 | ⏳ |
| Shopify示例 | https://checkout.shopify.com | 识别Shopify平台特征 | ⏳ |
| 独立电商站 | 自选 | 通用电商数据提取 | ⏳ |

**测试步骤:**
1. 访问测试网站
2. 点击扩展图标
3. 查看是否正确提取页面数据
4. 检查控制台是否有错误

### 2. **本地规则分析测试**

| 分析维度 | 测试内容 | 预期结果 | 状态 |
|---------|---------|---------|------|
| 语言适配 | 中文网站→英文地区分析 | 发现语言不匹配问题 | ⏳ |
| 文化适配 | 颜色、图像文化敏感性 | 识别文化冲突元素 | ⏳ |
| 合规性检查 | GDPR、CCPA合规 | 检测隐私政策缺失 | ⏳ |
| 用户体验 | 移动端适配检查 | 评估响应式设计 | ⏳ |

### 3. **AI分析功能测试**

| AI供应商 | 配置要求 | 测试内容 | 状态 |
|---------|---------|---------|------|
| DeepSeek | API Key | 深度语义分析 | ⏳ |
| 智谱GLM-4 | API Key | 中文内容理解 | ⏳ |
| 通义千问 | API Key | 跨境电商建议 | ⏳ |
| OpenAI GPT-4 | API Key | 综合分析质量 | ⏳ |

**API密钥配置位置:**
- 右键扩展图标 → 选项 → AI服务配置

### 4. **增强功能测试**

| 功能模块 | 测试场景 | 预期结果 | 状态 |
|---------|---------|---------|------|
| 跨境电商检测 | Shopify/WooCommerce网站 | 正确识别平台类型 | ⏳ |
| 设备市场分析 | 移动端访问 | 设备兼容性评分 | ⏳ |
| 网络性能测试 | 不同地区网站 | 网络延迟和评分 | ⏳ |
| 动态规则配置 | 规则更新 | 实时规则生效 | ⏳ |
| 用户行为追踪 | 操作记录 | 行为数据收集 | ⏳ |

### 5. **报告生成测试**

| 报告格式 | 测试内容 | 预期结果 | 状态 |
|---------|---------|---------|------|
| HTML报告 | 完整分析结果 | 格式化HTML输出 | ⏳ |
| PDF导出 | 专业报告格式 | 可下载PDF文件 | ⏳ |
| CSV数据 | 数据导出 | 结构化数据文件 | ⏳ |
| 可视化图表 | 评分图表 | SVG/Canvas图表 | ⏳ |

## 🔧 后端API测试

### 健康检查
```bash
curl http://localhost:3000/health
# 预期返回: {"status":"healthy"}
```

### AI分析API
```bash
curl -X POST http://localhost:3000/api/analysis/ai \
  -H "X-API-Key: demo-key-123" \
  -H "Content-Type: application/json" \
  -d '{
    "contentData": {
      "url": "https://example.com",
      "title": "Test Page"
    },
    "targetRegions": ["US", "GB"]
  }'
```

### 规则管理API
```bash
# 获取规则列表
curl -H "X-API-Key: demo-key-123" http://localhost:3000/api/rules

# 创建新规则
curl -X POST http://localhost:3000/api/rules \
  -H "X-API-Key: demo-key-123" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "测试规则",
    "category": "language",
    "enabled": true
  }'
```

## 🐛 问题排查指南

### 1. **扩展加载失败**
- 检查manifest.json语法
- 确认文件路径正确
- 查看Chrome扩展页面错误信息

### 2. **分析功能无响应**
- 检查网络连接
- 验证API密钥配置
- 查看浏览器控制台日志
- 确认目标网站可访问

### 3. **后端API连接失败**
- 确认后端服务已启动 (localhost:3000)
- 检查API密钥是否正确
- 验证CORS配置

### 4. **数据提取不完整**
- 检查目标网站结构
- 验证选择器配置
- 查看内容脚本日志

## 📊 性能基准测试

### 响应时间基准
- **内容抓取**: < 2秒
- **本地规则分析**: < 5秒  
- **AI分析** (有缓存): < 3秒
- **AI分析** (无缓存): < 30秒
- **报告生成**: < 10秒

### 资源使用基准
- **内存使用**: < 50MB
- **CPU使用**: < 5% (分析期间)
- **存储占用**: < 10MB

## ✅ 测试通过标准

### 基础功能 (必须100%通过)
- [ ] 扩展正常加载和显示
- [ ] 内容提取功能正常
- [ ] 本地规则分析有结果
- [ ] 报告生成功能正常
- [ ] 无严重错误或崩溃

### 高级功能 (80%以上通过)
- [ ] AI分析功能正常
- [ ] 跨境电商检测准确
- [ ] 网络性能测试有效
- [ ] 用户行为追踪工作
- [ ] 后端API连接正常

### 用户体验 (90%以上通过)
- [ ] 界面响应流畅
- [ ] 分析结果准确有用
- [ ] 错误提示友好
- [ ] 操作流程直观

## 🚀 开始测试

1. **运行部署脚本**: `./deploy-test.sh`
2. **按照TESTING_GUIDE.md加载扩展**
3. **逐项完成测试矩阵**
4. **记录测试结果和发现的问题**
5. **提交测试报告**

测试过程中遇到问题，请查看相应的日志输出和错误信息，大部分问题可以通过配置API密钥和检查网络连接解决。

**准备好开始测试了吗？** 🎯